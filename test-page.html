<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuietTab Test Page</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .hero {
            text-align: center;
            margin-bottom: 60px;
            padding: 60px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            color: white;
        }

        .hero h1 {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .hero p {
            font-size: 20px;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .section {
            background: white;
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .section h2 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #1e293b;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 30px;
        }

        .control-button {
            padding: 16px 24px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            background: #3b82f6;
            color: white;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .control-button.stop {
            background: #ef4444;
        }

        .control-button.stop:hover {
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.3);
        }

        .control-button.start-all {
            background: #f59e0b;
            grid-column: 1 / -1;
        }

        .control-button.start-all:hover {
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3);
        }

        .status-display {
            background: #f1f5f9;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            border-left: 4px solid #3b82f6;
        }

        .status-display.active {
            background: #fef2f2;
            border-left-color: #ef4444;
        }

        .status-display.optimized {
            background: #f0fdf4;
            border-left-color: #10b981;
        }

        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .performance-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }

        .performance-card h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #1e293b;
        }

        .metric-display {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 10px;
            color: #3b82f6;
        }

        .metric-display.high {
            color: #ef4444;
        }

        .metric-display.optimized {
            color: #10b981;
        }

        .metric-label {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 20px;
        }

        .visual-demo {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 120px;
            margin: 20px 0;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e2e8f0;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 10px;
        }

        .spinner.fast {
            animation-duration: 0.3s;
        }

        .spinner.slow {
            animation-duration: 2s;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .flash-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
            margin: 20px 0;
        }

        .flash-item {
            aspect-ratio: 1;
            background: #3b82f6;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .flash-item.flashing {
            animation: flash 0.5s infinite alternate;
        }

        .flash-item.slow-flash {
            animation: flash 2s infinite alternate;
        }

        @keyframes flash {
            0% { background: #3b82f6; }
            100% { background: #ef4444; }
        }

        .instructions {
            background: #fffbeb;
            border: 1px solid #fbbf24;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .instructions h3 {
            color: #92400e;
            margin-bottom: 12px;
        }

        .instructions ol {
            color: #92400e;
            padding-left: 20px;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        .quiettab-demo {
            background: #f0fdf4;
            border: 2px solid #10b981;
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            margin-top: 40px;
        }

        .quiettab-demo h3 {
            color: #065f46;
            margin-bottom: 16px;
        }

        .quiettab-demo p {
            color: #047857;
            margin-bottom: 20px;
        }

        .demo-button {
            background: #10b981;
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .demo-button:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .demo-button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero">
            <h1>üîá QuietTab Test Page</h1>
            <p>Experience the dramatic difference QuietTab makes with these performance simulations</p>
        </div>

        <div class="instructions">
            <h3>üìã How to Test QuietTab</h3>
            <ol>
                <li><strong>Install QuietTab:</strong> Load the extension in Chrome Developer mode</li>
                <li><strong>Start simulations:</strong> Click the buttons below to stress your browser</li>
                <li><strong>Watch the impact:</strong> See CPU usage spike and animations accelerate</li>
                <li><strong>Activate QuietTab:</strong> Click the extension icon and hit "Activate"</li>
                <li><strong>Feel the relief:</strong> Watch everything slow down and performance improve</li>
            </ol>
        </div>

        <div class="section">
            <h2>‚ö° Performance Simulations</h2>
            
            <div class="controls">
                <button class="control-button" id="heavyAnimations">üî• Heavy Animations</button>
                <button class="control-button" id="frequentTimers">‚è∞ Frequent Timers</button>
                <button class="control-button" id="adNetworks">üì° Ad Networks</button>
                <button class="control-button" id="canvasChaos">üé® Canvas Chaos</button>
                <button class="control-button start-all" id="startAll">üí• START ALL TESTS</button>
                <button class="control-button stop" id="stopAll">üõë Stop All</button>
            </div>

            <div class="status-display" id="statusDisplay">
                <strong>Status:</strong> <span id="statusText">Ready to test - Click buttons above to simulate resource-heavy scripts</span>
            </div>
        </div>

        <div class="performance-grid">
            <div class="performance-card">
                <h3>üíª CPU Usage</h3>
                <div class="metric-display" id="cpuUsage">5%</div>
                <div class="metric-label" id="cpuStatus">Normal - Browser running smoothly</div>
                <div class="visual-demo">
                    <div class="spinner" id="cpuSpinner"></div>
                </div>
            </div>

            <div class="performance-card">
                <h3>üéØ Visual Impact</h3>
                <div class="metric-display" id="animationCount">0</div>
                <div class="metric-label">Active Animations</div>
                <div class="visual-demo">
                    <div class="spinner" id="visualSpinner1"></div>
                    <div class="spinner" id="visualSpinner2"></div>
                    <div class="spinner" id="visualSpinner3"></div>
                </div>
            </div>

            <div class="performance-card">
                <h3>‚ö° Network Activity</h3>
                <div class="metric-display" id="networkRequests">0</div>
                <div class="metric-label">Simulated Ad Requests</div>
                <div class="flash-grid" id="flashGrid">
                    <!-- Flash items will be generated by JavaScript -->
                </div>
            </div>
        </div>

        <div class="quiettab-demo">
            <h3>üîá QuietTab Control Panel</h3>
            <p>Click the button below to simulate QuietTab activation and see the immediate performance improvement</p>
            <button class="demo-button" id="quietTabDemo">Simulate QuietTab Activation</button>
        </div>
    </div>

    <script>
        class QuietTabTestPage {
            constructor() {
                this.activeSimulations = new Set();
                this.intervals = new Map();
                this.animationFrames = new Set();
                this.quietModeActive = false;
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.createFlashGrid();
                this.startBasicMonitoring();
            }

            setupEventListeners() {
                document.getElementById('heavyAnimations').addEventListener('click', () => this.startHeavyAnimations());
                document.getElementById('frequentTimers').addEventListener('click', () => this.startFrequentTimers());
                document.getElementById('adNetworks').addEventListener('click', () => this.startAdNetworks());
                document.getElementById('canvasChaos').addEventListener('click', () => this.startCanvasChaos());
                document.getElementById('startAll').addEventListener('click', () => this.startAllTests());
                document.getElementById('stopAll').addEventListener('click', () => this.stopAllTests());
                document.getElementById('quietTabDemo').addEventListener('click', () => this.toggleQuietMode());
            }

            createFlashGrid() {
                const flashGrid = document.getElementById('flashGrid');
                for (let i = 0; i < 24; i++) {
                    const item = document.createElement('div');
                    item.className = 'flash-item';
                    flashGrid.appendChild(item);
                }
            }

            startBasicMonitoring() {
                this.updateStatus('Ready to test - Click buttons above to simulate resource-heavy scripts', 'normal');
            }

            startHeavyAnimations() {
                if (this.activeSimulations.has('animations')) return;
                
                this.activeSimulations.add('animations');
                this.updateStatus('Heavy animations running - EXTREME CPU usage!', 'active');
                
                // Make spinners go crazy
                const spinners = document.querySelectorAll('.spinner');
                spinners.forEach(spinner => spinner.classList.add('fast'));
                
                // Simulate high CPU usage
                this.updateCPU(95, 'CRITICAL - Browser severely stressed!');
                this.updateAnimationCount(50);
                
                // CPU-intensive animation loop
                const animate = () => {
                    if (!this.activeSimulations.has('animations')) return;
                    
                    // Simulate heavy computation
                    for (let i = 0; i < 100000; i++) {
                        Math.random() * Math.random();
                    }
                    
                    const frameId = requestAnimationFrame(animate);
                    this.animationFrames.add(frameId);
                };
                animate();
            }

            startFrequentTimers() {
                if (this.activeSimulations.has('timers')) return;
                
                this.activeSimulations.add('timers');
                this.updateStatus('Frequent timers running - High CPU usage!', 'active');
                
                // Create multiple high-frequency timers
                for (let i = 0; i < 20; i++) {
                    const interval = setInterval(() => {
                        // Simulate timer work
                        Math.random() * 1000;
                    }, 10); // 10ms intervals
                    
                    this.intervals.set(`timer-${i}`, interval);
                }
                
                this.updateCPU(75, 'HIGH - Multiple timers running');
            }

            startAdNetworks() {
                if (this.activeSimulations.has('ads')) return;
                
                this.activeSimulations.add('ads');
                this.updateStatus('Ad networks simulated - Network activity high!', 'active');
                
                // Start flashing elements
                const flashItems = document.querySelectorAll('.flash-item');
                flashItems.forEach(item => item.classList.add('flashing'));
                
                // Simulate network requests
                let requestCount = 0;
                const networkInterval = setInterval(() => {
                    requestCount += Math.floor(Math.random() * 5) + 1;
                    this.updateNetworkRequests(requestCount);
                }, 500);
                
                this.intervals.set('network', networkInterval);
                this.updateCPU(60, 'MODERATE - Ad scripts running');
            }

            startCanvasChaos() {
                if (this.activeSimulations.has('canvas')) return;
                
                this.activeSimulations.add('canvas');
                this.updateStatus('Canvas chaos active - Rendering intensive graphics!', 'active');
                
                // This would normally create a canvas with intensive rendering
                // For simplicity, we'll just update the metrics
                this.updateCPU(85, 'VERY HIGH - Canvas rendering active');
                this.updateAnimationCount(100);
            }

            startAllTests() {
                this.startHeavyAnimations();
                this.startFrequentTimers();
                this.startAdNetworks();
                this.startCanvasChaos();
                
                this.updateStatus('ALL TESTS RUNNING - MAXIMUM BROWSER STRESS!', 'active');
                this.updateCPU(98, 'EXTREME - All simulations active');
            }

            stopAllTests() {
                // Clear all simulations
                this.activeSimulations.clear();
                
                // Clear all intervals
                this.intervals.forEach(interval => clearInterval(interval));
                this.intervals.clear();
                
                // Clear animation frames
                this.animationFrames.forEach(frameId => cancelAnimationFrame(frameId));
                this.animationFrames.clear();
                
                // Reset UI
                const spinners = document.querySelectorAll('.spinner');
                spinners.forEach(spinner => {
                    spinner.classList.remove('fast', 'slow');
                });
                
                const flashItems = document.querySelectorAll('.flash-item');
                flashItems.forEach(item => {
                    item.classList.remove('flashing', 'slow-flash');
                });
                
                // Reset metrics
                this.updateStatus('All simulations stopped - Browser recovering', 'optimized');
                this.updateCPU(5, 'Normal - Browser running smoothly');
                this.updateAnimationCount(0);
                this.updateNetworkRequests(0);
                
                this.quietModeActive = false;
                document.getElementById('quietTabDemo').textContent = 'Simulate QuietTab Activation';
                document.getElementById('quietTabDemo').disabled = false;
            }

            toggleQuietMode() {
                if (!this.activeSimulations.size) {
                    alert('Start some simulations first to see QuietTab in action!');
                    return;
                }
                
                this.quietModeActive = !this.quietModeActive;
                
                if (this.quietModeActive) {
                    // Simulate QuietTab optimization
                    this.updateStatus('QuietTab ACTIVE - Performance optimized!', 'optimized');
                    
                    // Slow down animations
                    const spinners = document.querySelectorAll('.spinner');
                    spinners.forEach(spinner => {
                        spinner.classList.remove('fast');
                        spinner.classList.add('slow');
                    });
                    
                    // Slow down flashing
                    const flashItems = document.querySelectorAll('.flash-item');
                    flashItems.forEach(item => {
                        item.classList.remove('flashing');
                        item.classList.add('slow-flash');
                    });
                    
                    // Reduce CPU usage
                    const currentCPU = parseInt(document.getElementById('cpuUsage').textContent);
                    const optimizedCPU = Math.max(15, Math.floor(currentCPU * 0.3));
                    this.updateCPU(optimizedCPU, 'OPTIMIZED - QuietTab active');
                    
                    document.getElementById('quietTabDemo').textContent = 'Deactivate QuietTab';
                } else {
                    // Return to stressed state
                    if (this.activeSimulations.has('animations')) {
                        const spinners = document.querySelectorAll('.spinner');
                        spinners.forEach(spinner => {
                            spinner.classList.remove('slow');
                            spinner.classList.add('fast');
                        });
                    }
                    
                    if (this.activeSimulations.has('ads')) {
                        const flashItems = document.querySelectorAll('.flash-item');
                        flashItems.forEach(item => {
                            item.classList.remove('slow-flash');
                            item.classList.add('flashing');
                        });
                    }
                    
                    this.updateStatus('QuietTab DEACTIVATED - Browser stressed again!', 'active');
                    this.updateCPU(95, 'CRITICAL - Browser severely stressed!');
                    
                    document.getElementById('quietTabDemo').textContent = 'Simulate QuietTab Activation';
                }
            }

            updateStatus(text, type) {
                const statusDisplay = document.getElementById('statusDisplay');
                const statusText = document.getElementById('statusText');
                
                statusText.textContent = text;
                
                statusDisplay.className = 'status-display';
                if (type === 'active') {
                    statusDisplay.classList.add('active');
                } else if (type === 'optimized') {
                    statusDisplay.classList.add('optimized');
                }
            }

            updateCPU(percentage, status) {
                const cpuUsage = document.getElementById('cpuUsage');
                const cpuStatus = document.getElementById('cpuStatus');
                
                cpuUsage.textContent = `${percentage}%`;
                cpuStatus.textContent = status;
                
                cpuUsage.className = 'metric-display';
                if (percentage > 80) {
                    cpuUsage.classList.add('high');
                } else if (percentage < 30) {
                    cpuUsage.classList.add('optimized');
                }
            }

            updateAnimationCount(count) {
                document.getElementById('animationCount').textContent = count;
            }

            updateNetworkRequests(count) {
                document.getElementById('networkRequests').textContent = count;
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new QuietTabTestPage();
        });
    </script>
</body>
</html>

